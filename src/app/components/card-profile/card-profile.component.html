<div class="atropos atropos-card max-w-lg md:max-w-2xl lg:max-w-4xl w-full mx-auto p-4">
  <div class="atropos-scale">
    <div class="atropos-rotate">
      <div class="atropos-inner">
        <div class="my-2" data-atropos-opacity="0.9;1" *ngIf="userDataStatus">
          <div class="card nitro-card relative"
            [ngStyle]="{
              '--color1': themesColor[0] ? themesColor[0] : '#5C5C5C', 
              '--color2': themesColor[1] ? themesColor[1] : '#5C5C5C'
            }">
            
            <!-- Hiệu ứng profile -->
            <img id="profileEffectIntro" *ngIf="environment.default.profile_effect.intro"
              src="{{environment.default.profile_effect.intro}}"
              class="absolute z-30 w-full h-full rounded-lg object-cover pointer-events-none">
            
            <div class="card-header relative">
              <div [ngStyle]="{'background-image': banner}" class="banner-img w-full h-40 bg-cover bg-center"></div>
            </div>

            <div class="card-body p-4">
              <div class="profile-header flex flex-col items-center text-center">
                <a href="https://discord.com/users/{{userId}}" target="_blank" class="block relative w-24 h-24">
                  <img class="w-full h-full rounded-full border-4 border-gray-800"
                    src="https://khaidevapi.onrender.com/discord/data/avatar/{{userId}}" />
                  <div class="presence-state absolute bottom-0 right-0 w-5 h-5 rounded-full border-2 border-white"
                    [ngClass]="{
                      'bg-green-500': lanyardData?.d?.discord_status === 'online',
                      'bg-yellow-500': lanyardData?.d?.discord_status === 'idle',
                      'bg-red-500': lanyardData?.d?.discord_status === 'dnd',
                      'bg-gray-500': lanyardData?.d?.discord_status === 'offline'
                    }">
                  </div>
                </a>
              </div>

              <div class="profile-body text-center">
                <p class="text-lg font-bold mt-2">{{userData?.user?.global_name || userData?.user?.username}}</p>
                <p class="text-sm text-gray-400">{{userData?.user_profile?.pronouns || ''}}</p>

                <hr class="my-4 border-gray-600">

                <!-- Thông tin bio -->
                <div *ngIf="userData?.user_profile?.bio!.length > 0" class="text-sm text-gray-300">
                  <p class="font-semibold">Giới thiệu về tôi</p>
                  <markdown class="markdown" [data]="userBioFormatted" [inline]="false"></markdown>
                </div>

                <!-- Hoạt động -->
                <div class="activities my-4" *ngIf="lanyardActivities.length > 0">
                  <p class="font-semibold">Hoạt động</p>
                  <div class="flex flex-wrap justify-center gap-4">
                    <div *ngFor="let activity of lanyardActivities" class="flex items-center gap-2">
                      <img class="w-10 h-10 rounded" src="{{getActivityImageUrl(activity, activity.assets?.large_image)}}" />
                      <div>
                        <p class="text-sm font-bold">{{activity.name}}</p>
                        <p class="text-xs text-gray-400">{{activity.details}}</p>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Kết nối -->
                <div class="connected-accounts my-4" *ngIf="userData?.connected_accounts!.length > 0">
                  <p class="font-semibold">Kết Nối</p>
                  <div class="flex justify-center gap-2">
                    <div class="badge-connected-account" *ngFor="let account of userData?.connected_accounts">
                      <img class="w-8 h-8" src="../../../assets/images/connections/{{account.type}}.svg" alt="{{account.type}}" />
                    </div>
                  </div>
                </div>

                <!-- Input nhắn tin -->
                <div class="message mt-4">
                  <input type="text" placeholder="Nhấp để thêm ghi chú @{{userData?.user?.username}}"
                    [(ngModel)]="message"
                    class="w-full p-2 rounded-lg border border-gray-700 bg-gray-800 text-white focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
              </div>
            </div>

          </div>
        </div>
      </div>
    </div>
  </div>
</div>
